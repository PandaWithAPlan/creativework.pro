# dev-process.md

Версия: 1.0
Дата: 2025-12-01
Статус: активная разработка (ветка `feature/dev-process-docs` + `feature/phase1-project-structure`)

## 1. Контекст проекта

Creative Work Pro Hub / creativework.pro — статический сайт на Apache (HTML5 + CSS3 + Vanilla JS + лёгкий PHP для форм), который должен реализовать трёхуровневую гибридную модель (Community Hub, Services & Tools, Innovation Lab) и служить входной точкой в экосистему.

Основные источники требований:
- `AGENT.md` — роль агента и общие принципы работы.
- Technical Specification (TZ) — архитектура, структура страниц, технические требования.
- Content Documentation — полный контент для всех страниц.
- Deploy & GitHub Guide — структура репозитория, деплой на Apache.
- Starter Code — базовые шаблоны HTML/CSS/JS/PHP.

## 2. Высокоуровневый план разработки (v1)

### Фаза 0 — Уточнение контекста
- Полностью изучить документы TZ, Content, Deploy & GitHub Guide, Starter Code, чек-листы из `docs/`.
- Сверить обязательные страницы, блоки и функциональные требования с тем, что уже реализовано/запланировано.

### Фаза 1 — Базовая структура репозитория и файлов
- Перейти от плоской структуры (`index.html` + `style.css`) к структуре из TZ/Deploy Guide: корневая папка или `src/` с
  - `index.html`, `about.html`, `services.html`, `blog.html`, `contact.html`, `faq.html`, `privacy.html`, `terms.html`.
  - `css/` (`variables.css`, `styles.css`, `responsive.css`, `animations.css`).
  - `js/` (`main.js`, `forms.js`, `scroll-animation.js`, `analytics.js`).
  - `img/` (подпапки `icons/`, `hero/`, `case-studies/`, `partners/`, `team/`, `blog/`).
  - `api/contact.php` (PHP обработчик форм) и, опционально, другие API-endpoints.
- Определить, будет ли использоваться подпапка `public/` как продакшн-артефакт, или сайт будет собираться/разворачиваться напрямую из `src/`/корня.

### Фаза 2 — Каркас страниц и навигация
- На основе Starter Code и Content PDF создать каркас всех обязательных страниц.
- Вынести общие элементы (header, footer, навигация, базовая сетка секций) в повторяемый паттерн для всех HTML-файлов.
- Настроить корректные relative-пути к CSS/JS/изображениям с учётом будущего деплоя на Apache.

### Фаза 3 — Наполнение контентом и верстка блоков
- Перенести контент для главной (`index.html`): hero, три уровня, блок «О нас», направления/вертикали, преимущества, тарифы, кейсы, блог-превью, контакт/подписка.
- Перенести и адаптировать контент для страниц `/about`, `/services`, `/blog`, `/contact`, `/faq`, `/privacy`, `/terms` в соответствии с Content PDF.
- Следовать дизайн-системе (цвета, типографика, отступы, сетка) из TZ и Starter Code.

### Фаза 4 — Интерактивность и формы
- Реализовать JavaScript-функциональность: мобильное меню, sticky header, плавный скролл, анимации при скролле, кнопка Back-to-top, переключатель тарифов (Monthly/Yearly), слайдер кейсов.
- Реализовать клиентскую валидацию контактных форм, формы консалтинга и подписки.
- Настроить `api/contact.php` и другие PHP-обработчики форм (POST `/api/contact`, `/api/consultation`, интеграция c email сервисом).
- Добавить базовую интеграцию с Google Analytics 4 (через `analytics.js`).

### Фаза 5 — SEO, производительность и доступность
- Добавить уникальные `<title>`, `meta description`, Open Graph теги и (при необходимости) JSON-LD для каждой страницы.
- Создать и подключить `robots.txt` и `sitemap.xml`.
- Подготовить и задействовать `.htaccess` (HTTPS-редирект, удаление `.html`, кэширование, GZIP).
- Оптимизировать изображения (размер/форматы, `loading="lazy"`).
- Проверить и улучшить показатели Lighthouse (Performance, SEO, Best Practices, Accessibility).
- Убедиться в корректной клавиатурной навигации и контрастности (WCAG AA).

### Фаза 6 — Тестирование, деплой и мониторинг
- Cross-browser тесты (Chrome, Firefox, Safari, Edge) и тесты на основных мобильных устройствах/эмуляторах.
- Проверка всех форм (валидация, отправка, обработка ошибок).
- Настройка продакшн-деплоя на Apache (FTP/SFTP или Git-based, конфигурация SSL/HTTPS).
- Подключение Google Analytics 4 и Google Search Console, отправка sitemap.
- Настройка минимального мониторинга (логирование ошибок PHP, базовые алерты).

## 3. Хронология событий

### 2025-12-01
- Изучены ключевые документы проекта: Technical Specification (TZ), Content Documentation, Deploy & GitHub Guide, Starter Code и чек-листы в `docs/`.
- Проанализирован репозиторий `PandaWithAPlan/creativework.pro` (ветка `main`): зафиксировано текущее состояние (одностраничная заглушка `index.html` + `style.css`, без структуры `src/` и дополнительных страниц).
- Сформирован высокоуровневый план разработки сайта (см. раздел 2).
- Создана ветка `feature/dev-process-docs` для документирования хода работ.
- Добавлен файл `dev-process.md` с базовым описанием контекста, планом разработки и первой записью в хронологии.
- Создана ветка `feature/phase1-project-structure` для выполнения задач 4.1–4.3 из Deploy & GitHub Guide (подготовка к хостингу, структура и конфигурация Apache).
- Добавлен базовый файл `.htaccess` в корне репозитория с настройками `mod_rewrite`, HTTPS-редиректом, кэшированием и GZIP-компрессией для будущего деплоя на Apache.

### 2025-12-01 — Фаза 1, шаг 1.1: целевая структура и стратегия миграции
- Принято решение использовать директорию `src/` как основную рабочую папку фронтенда. На этапе деплоя содержимое `src/` будет выгружаться в корень веб-документов (`public_html/`) или во вспомогательную папку `public/` (если будет использоваться автоматический deploy/CI). Конфигурационные и служебные файлы (`.htaccess`, `README.md`, `dev-process.md`, GitHub workflows) остаются в корне репозитория.
- Зафиксировано целевое дерево `src/` (первая итерация):

```text
src/
  index.html
  about.html
  services.html
  blog.html
  contact.html
  faq.html
  privacy.html
  terms.html
  css/
    variables.css
    styles.css
    responsive.css
    animations.css
  js/
    main.js
    forms.js
    scroll-animation.js
    analytics.js
  img/
    icons/
    hero/
    case-studies/
    partners/
    team/
    blog/
  fonts/
  assets/
  api/
    contact.php
  data/
```

- Текущие файлы `index.html` и `style.css` в корне репозитория считаются временной заглушкой. На следующих шагах Фазы 1 будет добавлен новый многостраничный каркас в `src/`, после чего заглушка либо будет перенесена в отдельную папку (`legacy/`), либо удалена после стабилизации новой структуры.

### 2025-12-01 — Фаза 1, шаг 1.2: создание директорий и служебных файлов
- В ветке `feature/phase1-project-structure` созданы базовые директории фронтенд-проекта (через `.gitkeep`):
  - `src/` — корень исходников.
  - `src/css/` — все CSS-файлы проекта.
  - `src/js/` — JavaScript-логика (навигация, формы, анимации, аналитика).
  - `src/img/` и подпапки: `icons/`, `hero/`, `case-studies/`, `partners/`, `team/`, `blog/` — структура под изображения и медиа.
  - `src/fonts/` — веб-шрифты (если будут использоваться).
  - `src/assets/` — прочие статические ресурсы (документы, архивы, спец-файлы).
  - `src/api/` — будущие PHP-обработчики (`contact.php` и др.).
  - `src/data/` — JSON / вспомогательные данные (список статей блога, конфигурация тарифов и т.п.).
- Обновлён `.gitignore` для учёта build/deploy артефактов и OS-файлов:
  - Добавлены игнорируемые пути: `public/`, `dist/`.
  - Добавлены OS-специфичные файлы: `.DS_Store`, `Thumbs.db`.
- Структура теперь готова для следующего шага Фазы 1 (1.3) — создания базовых HTML-файлов в `src/` c общим каркасом страниц.

### 2025-12-01 — Фаза 1, шаг 1.3: базовые HTML-файлы и общий каркас страниц
- В каталоге `src/` созданы восемь HTML-страниц с единым каркасом (head + header/nav + main + footer):
  - `index.html` — главная страница с placeholder hero-секцией и навигацией по основным разделам.
  - `about.html` — страница «О нас» с общим описанием того, что здесь будет история, миссия и команда.
  - `services.html` — страница сервисов и тарифов с заголовком и кратким описанием будущей структуры (Community / Services & Tools / Innovation Lab).
  - `blog.html` — архив блога с placeholder под сетку статей и фильтры.
  - `contact.html` — страница контактов с описанием будущих форм и офисов.
  - `faq.html` — страница с подробным FAQ (пока placeholder под аккордеоны вопросов).
  - `privacy.html` — страница политики конфиденциальности с заглушкой текста.
  - `terms.html` — страница условий использования с заглушкой текста.
- Для всех страниц:
  - Подключены единые CSS-файлы: `css/variables.css`, `css/styles.css`, `css/responsive.css`, `css/animations.css`.
  - Подключены JS-файлы-заготовки: `js/analytics.js`, `js/main.js`, `js/forms.js`, `js/scroll-animation.js`.
  - Используется единый header с навигацией по ключевым страницам и footer с тремя колонками (Компания / Продукты / Правовые).
- Контент на этом шаге минимален и служит только структурным ориентиром. Полноценные тексты и блоки будут перенесены из Content PDF в рамках последующих фаз (Фаза 2–3).

### 2025-12-01 — Фаза 1, шаг 1.4: CSS-структура и дизайн-система
- В `src/css/variables.css` добавлены дизайн-токены:
  - Цвета (primary, accent, фоновые, текстовые, границы, тени).
  - Типографика (базовые размеры шрифта, крупные размеры для заголовков/hero).
  - Отступы (сетка 8/16/24/32/48/72).
  - Радиусы и максимальная ширина контейнера (`--max-width: 1200px`).
- В `src/css/styles.css` реализованы базовые глобальные стили:
  - Сброс margin/padding и box-sizing.
  - Базовые стили `body`, `img`, `a`, `.container`, `.main`.
  - Типографика для `h1–h3` и `p`.
  - Общий класс `.section` и оформление `.page-hero`.
  - Каркас header/nav: `.header`, `.navbar`, `.navbar-content`, `.navbar-logo`, `.navbar-menu`, `.navbar-toggle`, включая состояние активного пункта меню (`.is-active`).
  - Базовые кнопки: `.btn`, `.btn-primary`, `.btn-secondary`, `.btn-tertiary` с ховерами.
  - Структура футера: `.footer`, `.footer-content`, `.footer-section`, `.footer-bottom`.
- В `src/css/responsive.css` добавлены брейкпоинты:
  - До 1024px — уменьшены заголовки и вертикальные отступы секций.
  - До 768px — мобильная навигация (скрытое меню, раскрытие по классу `.active`, показ `.navbar-toggle`), одна колонка в футере, уменьшенный базовый размер шрифта.
  - До 480px — ещё меньшие заголовки, более компактные отступы, кнопки на всю ширину.
- В `src/css/animations.css` добавлены утилиты анимаций:
  - keyframes `fade-in` и `fade-in-up`.
  - Классы `.fade-in`, `.fade-in-up`.
  - Классы `.reveal-on-scroll` и `.reveal-on-scroll.is-visible` для совместного использования с JS наблюдателем прокрутки.
- Все HTML-страницы уже подключают эти CSS-файлы, благодаря чему можно начинать Фазу 2 (детализированный каркас блоков) и Фазу 3 (перенос контента) без изменения ссылок на стили.

### 2025-12-01 — Фаза 1, шаг 1.5: JS-каркас (main/forms/scroll/analytics)
- В `src/js/main.js` добавлена базовая логика навигации:
  - Sticky header: при скролле более чем на 16px к `#main-header` добавляется класс `.is-scrolled` (может использоваться в CSS для тени/фона).
  - Мобильное меню: по клику на `#mobile-menu-btn` переключается класс `.active` у `#navbar-menu`.
  - При клике по любому пункту навигации в мобильном меню оно автоматически закрывается (удаляется `.active`).
- В `src/js/forms.js` реализован простой обработчик формы как заглушка:
  - Функция `attachSimpleHandler(formId)` навешивает `submit` на форму по id.
  - Для формы `#contact-form` (будущая основная контактная форма) проверяются поля `name`, `email`, `message`.
  - При успешной проверке выводится сообщение `alert` и лог в `console.info`, после чего форма сбрасывается.
  - Реальная логика `fetch` на `/api/contact` и обработка ответа будет добавлена в последующих фазах; в комментарии оставлен TODO.
- В `src/js/scroll-animation.js` добавлен IntersectionObserver для анимаций при скролле:
  - Находит элементы с классом `.reveal-on-scroll`.
  - Если браузер не поддерживает `IntersectionObserver`, сразу добавляет класс `.is-visible` (fallback без анимации).
  - При появлении элемента в viewport добавляет класс `.is-visible` и отписывается от наблюдения.
- В `src/js/analytics.js` подготовлена заготовка подключения Google Analytics 4:
  - Конфигурируется константа `GA_ID = 'G-XXXXXXX'` (владелец проекта должен заменить на реальный ID).
  - Если ID не задан, скрипт выводит сообщение в консоль и ничего не инициализирует.
  - При наличии ID динамически добавляется скрипт `https://www.googletagmanager.com/gtag/js?id=...`, после загрузки инициализируются `gtag('js')` и `gtag('config', GA_ID)`.
- Все скрипты обёрнуты в немедленно вызываемые функции, чтобы не засорять глобальное пространство имён и уменьшить риск коллизий.
